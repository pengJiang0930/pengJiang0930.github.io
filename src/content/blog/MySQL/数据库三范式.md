---
title: 数据库三范式
publishDate: 2022-12-05
description: 'MySQL详解：数据库三范式'
tags:
  - 数据库
  - MySQL
  
language: '中文'
---



##  什么是“范式”？

“范式”（Normal Form）是数据库设计中的一套规范，目的是让数据库结构更合理、减少数据冗余、避免插入/更新/删除异常。

三范式就是其中最常用、最核心的三个规范，分别是：

> **第一范式（1NF）→ 第二范式（2NF）→ 第三范式（3NF）**

它们是层层递进的关系 —— 要满足第二范式，必须先满足第一范式；要满足第三范式，必须先满足第二范式。







## 第一范式（1NF

> **核心思想：每个字段都是原子性的，不可再拆分。**

举个例子：假设我们有个“学生表”，其中一列是“联系方式”：

| 学生ID | 姓名 | 联系方式                               |
| ------ | ---- | :------------------------------------- |
| 1      | 张三 | 电话：138xxx，邮箱：zhangsan@email.com |

**违反1NF** —— 因为“联系方式”包含了电话和邮箱两个信息，不是一个原子字段。



正确做法：拆成两个独立字段：

| 学生ID | 姓名 | 电话   | 邮箱               |
| ------ | ---- | ------ | ------------------ |
| 1      | 张三 | 138xxx | zhangsan@email.com |

 这样每个字段都不可再分，满足第一范式。

>  实际开发中，1NF 是最基本要求，现代数据库几乎默认满足，但设计表时仍要注意避免把多个值塞进一个字段（比如用逗号分隔多个电话）。

---



## 第二范式（2NF）

> **核心思想：在1NF基础上，非主键字段必须完全依赖于整个主键，不能只依赖主键的一部分。**

**适用场景**：只有当你的表有“复合主键”（联合主键）时，2NF才需要特别注意。

假设我们最初的设计只有一张表，包含了所有信息：

| **学号 (SID)** | **学生姓名 (SName)** | **课程号 (CID)** | **课程名称 (CName)** | **老师 (Teacher)** | **老师职级 (TRank)** |
| :------------- | :------------------- | :--------------- | :------------------- | :----------------- | :------------------- |
| 101            | 张三                 | C01              | 高等数学             | 李教授             | 教授                 |
| 101            | 张三                 | C02              | 大学英语             | 王老师             | 讲师                 |
| 102            | 李四                 | C01              | 高等数学             | 李教授             | 教授                 |
| 103            | 王五                 | C02              | 大学英语             | 王老师             | 讲师                 |
| 103            | 王五                 | C03              | 线性代数             | 刘副教授           | 副教授               |

这张表的主键是 **(学号, 课程号)**，因为只有这两个字段组合才能唯一确定一条记录（某个学生选了某门课的成绩）。

**问题：** “非主键字段是否完全依赖于整个主键 **(学号, 课程号)**，还是只依赖于一部分？”

我们来分析每个字段：

- **学生姓名 (SName):** 只依赖于**学号**。只要学号是101，名字一定是张三，跟选了哪门课（C01还是C02）无关。  **部分依赖**
- **课程名称 (CName):** 只依赖于**课程号**。只要课程号是C01，课程名一定是高等数学，跟哪个学生选它无关。  **部分依赖**
- **老师 (Teacher) 和 老师职级 (TRank):** 这里稍微复杂点。看起来老师只依赖于课程号（高数课永远是李教授教），但老师职级又依赖于老师。我们先按2NF的规则看，它们显然也不依赖于“学号”，所以也是**部分依赖**。

这就违反了第二范式！



**违反2NF导致的问题：**

- **数据冗余：** 李四也选了高数，张三的学生姓名、高数的课程信息、老师信息都被重复存储。
- **更新异常：** 如果“大学英语”改名为“学术英语”，需要修改所有选了这门课的记录，极易出错。
- **插入异常：** 如果想新增一门课程“C04-哲学”，但还没有学生选课，由于缺少主键的一部分（学号），这门课程就无法录入。

**解决方案：拆表！**

我们需要把只依赖于部分主键的字段拆出去。

1. **学生表 (Students)**：描述学生自身信息
   - 主键：`学号 (SID)`
   - 字段：SID, SName
2. **课程表 (Courses)**：描述课程自身信息
   - 主键：`课程号 (CID)`
   - 字段：CID, CName, Teacher, TRank (*注意：这里我们暂时还留着老师和职级，3NF再来处理它*)
3. **选课表 (Enrollments)**：只描述“学生选课”这个行为
   - 主键：`(学号, 课程号) (SID, CID)`
   - 字段：SID, CID (*以后还可以在这里加入“成绩”字段*)

现在，我们满足了 **2NF**。每张表只做一件事。

---



## 第三范式（3NF）

> **核心思想：在2NF基础上，非主键字段之间不能有依赖关系，所有非主键字段必须直接依赖主键，不能“通过别人”间接依赖主键。**

现在我们来检查拆出来的 **`课程表 (Courses)`** 是否符合3NF。

**课程表 (Courses)** 的结构：

- 主键：`课程号 (CID)`
- 字段：CID, CName, Teacher, TRank

**分析：**

- `CID`→ `CName`(课程号决定课程名) 
- `CID`→ `Teacher`(课程号决定由哪位老师教) 
- `Teacher`→ `TRank`(老师姓名决定了他的职级) 
- 因此，存在传递依赖：`CID`→ `Teacher`→ `TRank`

**违反3NF导致的问题：**

- **数据冗余：** 如果李教授教另一门课“概率论”，他的职级“教授”又会被重复存储一次。
- **更新异常：** 如果王老师从“讲师”晋升为“副教授”，必须修改所有他教的课程记录。
- **插入异常：** 如果学校新聘任了一位“赵老师”，职级是“助教”，但还没给他分配课程，由于缺少主键（课程号），这条信息就无法存入课程表。

**解决方案：再次拆表！**

我们需要把传递依赖的字段拆出去。

1. **教师表 (Teachers)**：描述教师自身信息
   - 主键：`老师姓名 (Teacher)`(*通常用工号，这里为理解方便沿用姓名*)
   - 字段：Teacher, TRank
2. **课程表 (Courses)**：描述课程信息，并引用教师
   - 主键：`课程号 (CID)`
   - 字段：CID, CName, Teacher (*Teacher 作为外键，关联到 Teachers 表*)



## 最终满足三范式的设计

经过一步步的规范化，我们最初的一张表被拆分成了以下**四张表**，完全符合三范式：

**1. 学生表 (Students)**

| SID (PK) | SName |
| :------- | :---- |
| 101      | 张三  |
| 102      | 李四  |
| 103      | 王五  |

**2. 教师表 (Teachers)**

| Teacher (PK) | TRank  |
| :----------- | :----- |
| 李教授       | 教授   |
| 王老师       | 讲师   |
| 刘副教授     | 副教授 |

**3. 课程表 (Courses)**

| CID (PK) | CName    | Teacher (FK → Teachers) |
| :------- | :------- | :---------------------- |
| C01      | 高等数学 | 李教授                  |
| C02      | 大学英语 | 王老师                  |
| C03      | 线性代数 | 刘副教授                |

**4. 选课表 (Enrollments)**

| SID (FK → Students) | CID (FK → Courses) |
| :------------------ | :----------------- |
| 101                 | C01                |
| 101                 | C02                |
| 102                 | C01                |
| 103                 | C02                |
| 103                 | C03                |





---

## 总结：

| 范式 | 要求                                                         | 关键词       |
| ---- | ------------------------------------------------------------ | ------------ |
| 1NF  | **列不可分**。保证每列都是最小单元，没有重复组。             | 不可拆分     |
| 2NF  | **消除部分依赖**。针对复合主键，确保其他字段只由整个主键决定，而不是主键的一部分。**“一事一表”**。 | 消除部分依赖 |
| 3NF  | **消除传递依赖**。确保所有字段都直接描述主键，而不是描述另一个非主键字段。**“直接描述，不绕弯”**。 | 消除传递依赖 |

你可以把范式理解成一种“拆表”的规范：

- 违反1NF？拆列。
- 违反2NF？把只依赖于部分主键的字段拆出去，建一张新表。
- 违反3NF？把传递依赖的字段拆出去，建一张新表。

最终目的都是为了**减少数据冗余**，**保证数据一致性**，**增强数据库的灵活性和可维护性**。



